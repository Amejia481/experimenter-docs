<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Experimenter Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Experimenter Docs Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Experimenter Docs" href="/opensearch.xml"><title data-react-helmet="true">Desktop Rollouts | Experimenter Docs</title><meta data-react-helmet="true" property="og:url" content="https://experimenter.info/desktop-rollouts"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Desktop Rollouts | Experimenter Docs"><meta data-react-helmet="true" name="description" content="If you want to set configurations for a feature remotely for non-experiment users, you can do so with Nimbus Rollouts."><meta data-react-helmet="true" property="og:description" content="If you want to set configurations for a feature remotely for non-experiment users, you can do so with Nimbus Rollouts."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://experimenter.info/desktop-rollouts"><link data-react-helmet="true" rel="alternate" href="https://experimenter.info/desktop-rollouts" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://experimenter.info/desktop-rollouts" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.74449a08.css">
<link rel="preload" href="/assets/js/runtime~main.010f4c78.js" as="script">
<link rel="preload" href="/assets/js/main.c4a08676.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo-dark.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Experimenter Docs</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://experimenter.services.mozilla.com/nimbus/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Nimbus</a><a href="https://mana.mozilla.org/wiki/display/FJT/Project+Nimbus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Mana</a><a href="https://github.com/mozilla/experimenter-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo-dark.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Experimenter Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://experimenter.services.mozilla.com/nimbus/" target="_blank" rel="noopener noreferrer" class="menu__link">Nimbus</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/Project+Nimbus" target="_blank" rel="noopener noreferrer" class="menu__link">Mana</a></li><li class="menu__list-item"><a href="https://github.com/mozilla/experimenter-docs" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Welcome</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/">Intro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contributing">Contributing</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/x/XdTNBw" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Design Process</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/Nimbus+Onboarding#NimbusOnboarding-Branches" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Nimbus Onboarding</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Experiment Owners</a><ul class="menu__list"><li class="menu__list-item"><a href="https://docs.google.com/document/d/155EUgzn22VTX8mFwesSROT3Z6JORSfb5VyoMoLra7ws" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Experimentation with Nimbus</a></li><li class="menu__list-item"><a href="https://docs.google.com/document/d/155EUgzn22VTX8mFwesSROT3Z6JORSfb5VyoMoLra7ws/edit#heading=h.75kfit458h84" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Monitoring and Analyzing your Experiment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/console/custom-audiences">Custom Audiences</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/console/preview">Previewing Experiments</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Jetstream</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jetstream/jetstream">Jetstream overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jetstream/metrics">Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jetstream/statistics">Statistics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jetstream/outcomes">Outcomes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jetstream/configuration">Configuring Jetstream</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jetstream/data-products">Jetstream Data Products</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jetstream/operations">Jetstream Architecture and Operations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jetstream/troubleshooting">Troubleshooting Jetstream</a></li><li class="menu__list-item"><a href="https://github.com/mozilla/jetstream" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">GitHub Repo</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Data Scientists</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/data-scientists">Experimentation for data scientists</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Fenix Engineers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fenix-engineers">Implementing an experiment</a></li><li class="menu__list-item"><a href="https://docs.google.com/document/d/1kchihPal0__A4VOAiPJarNuZXns5KhOHHfIeIzT6zfU/edit#" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Android API (proposal)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/feature-variables-and-me">Feature Variables API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Firefox for iOS Engineers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/feature-variables-and-me">Feature Variables API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Fenix Testing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/android-frontend-testing">Testing on mobile</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Desktop Engineers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/desktop-feature-api">Nimbus Feature API (JS)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/desktop-migration-guide">Migration Guide (JS)</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/desktop-rollouts">Desktop Rollouts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/desktop-frontend-testing">Desktop Front-end testing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Core Nimbus Team</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/android-feature-api">PROPOSAL - Android Feature API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/client-sdk-states-and-lifecycle">Client SDK States &amp; Lifecycle</a></li><li class="menu__list-item"><a href="https://github.com/mozilla/experimenter" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Experimenter GH Repo</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/How+to+Launch+a+Nimbus+Experiment" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">How to Launch a Nimbus Experiment</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/pages/viewpage.action?pageId=130920248" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Nimbus Data Transfer Object</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/Nimbus+Engineering#NimbusEngineering-ExperimentTelemetry" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Experiment Telemetry</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/Lessons+Learned+-+Experiment+Incidents+and+Close+Calls" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Lessons Learned</a></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Desktop Rollouts</h1></header><div class="markdown"><p>If you want to set configurations for a feature remotely <em>for non-experiment users</em>, you can do so with Nimbus Rollouts.</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>This feature is still in the early stages of development. The first version will be available in Firefox 89 for a limited set of early users and more extensively in Firefox 90. See <a href="https://mana.mozilla.org/wiki/display/FJT/Rapid+Rollouts" target="_blank" rel="noopener noreferrer">our project plan</a> for more information.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="faqs"></a>FAQS<a class="hash-link" href="#faqs" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="what-is-this-for"></a>What is this for?<a class="hash-link" href="#what-is-this-for" title="Direct link to heading">#</a></h3><ul><li>Launching a winning branch of an experiment faster than the trains.</li><li>Launching a configuration to non-experiment users <em>during an experiment</em> after a short period of verification</li><li>Configuring different settings for a feature for different audiences remotely</li><li>A &quot;kill switch&quot; if you want to launch a feature but then turn it off if something goes wrong.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="when-should-i-not-use-a-rollout"></a>When should I not use a rollout?<a class="hash-link" href="#when-should-i-not-use-a-rollout" title="Direct link to heading">#</a></h3><p>If the feature has not yet been extensively tested, isn&#x27;t production quality, or needs a period of validation on the trains.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="when-can-i-use-them"></a>When can I use them?<a class="hash-link" href="#when-can-i-use-them" title="Direct link to heading">#</a></h3><ul><li>In Firefox 89 on Desktop, if you are an L3 Nimbus Reviewer or UJET engineer.</li><li>In Desktop starting in <strong>Firefox 90</strong></li><li>(Mobile dates TBD)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="can-i-run-an-nimbus-experiment-and-a-rollout-simultaneously"></a>Can I run an Nimbus experiment and a rollout simultaneously?<a class="hash-link" href="#can-i-run-an-nimbus-experiment-and-a-rollout-simultaneously" title="Direct link to heading">#</a></h3><p>It&#x27;s possible, but bear in mind that rollouts are not measurement instruments. Experiments are.</p><p>If you have uncertainty about the effect of the feature,
you may wish to be guided by experiment results instead of deploying the feature immediately.</p><p>Before you do this, you should consider:</p><ul><li>Future experimentation needs: once you deploy the feature to someone,
you lose the ability to observe what happens when you introduce that feature to that user.
Consider whether you have a need for holdbacks.</li><li>Decision criteria: identify the risks you&#x27;re trying to mitigate with a rollout and decide whether you need multiple stages or not.
If you have multiple stages, how will you know whether to advance or roll back?
What signals will help you make your decision? Where will they come from?
If you are relying on the experiment to guide you, make sure that the timelines are compatible.
Consult data science before relying on signals derived from the behavior of the rollout group,
since rollouts are not measurement tools and lack a control.</li></ul><p>You would need to:</p><ol><li>Launch an experiment that targets a fixed portion of the population (sized appropriately for whatever you are trying to measure)</li><li>When you are ready, launch a rollout using the steps below at a low percentage of the population</li><li>As the rollout proceeds, consult your decision criteria. Change the percentage of the roll-out by editing the configuration.</li></ol><p>Keep in mind that if you do plan to release the experience to 100% of users, you should make sure it meets production quality standards. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="what-if-a-user-enrolls-in-both-a-rollout-and-an-experiment"></a>What if a user enrolls in both a rollout and an experiment?<a class="hash-link" href="#what-if-a-user-enrolls-in-both-a-rollout-and-an-experiment" title="Direct link to heading">#</a></h3><p>If a client receives a rollout <em>and</em> enrolls in an experiment for the same feature, the Feature API will <strong>prefer the experiment configuration</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-launch-a-roll-out"></a>How to launch a roll-out<a class="hash-link" href="#how-to-launch-a-roll-out" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="step-1---register-your-feature-in-the-nimbus-manifest"></a>Step 1 - Register your feature in the Nimbus Manifest<a class="hash-link" href="#step-1---register-your-feature-in-the-nimbus-manifest" title="Direct link to heading">#</a></h3><p>To be able to use rollouts, make sure you <a href="/desktop-feature-api#registering-a-new-feature">register your feature in the Nimbus manifest</a> and add variables you want to be able to set remotely. This process is identical to what you would do for running Nimbus Experiments, so if you&#x27;ve already done that, you don&#x27;t need to make any changes in Firefox.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="step-2---add-a-configuration"></a>Step 2 - Add a configuration<a class="hash-link" href="#step-2---add-a-configuration" title="Direct link to heading">#</a></h3><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>This is for MVP testing only will be replaced by Experimenter UI by Firefox 90.</p></div></div><p>To rollout changes to a feature, you will need to update (or create, if none exists) the record that matches your feature id in the <code>nimbus-desktop-defaults</code> [remote settings collection(<a href="https://settings-writer.stage.mozaws.net/v1/admin/#/buckets/main-workspace/collections/nimbus-desktop-defaults/records" target="_blank" rel="noopener noreferrer">https://settings-writer.stage.mozaws.net/v1/admin/#/buckets/main-workspace/collections/nimbus-desktop-defaults/records</a>):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The feature id - should match your manifest entry</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;aboutwelcome&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  configurations</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      slug</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;windows-pin&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      description</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;For windows users that can use the pin API&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      targeting</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;os.windowsBuildId &gt; 12345&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      enabled</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      variables</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> skipFocus</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      slug</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;all&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      description</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;All users&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      targeting</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;true&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      enabled</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      variables</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> skipFocus</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Each entry in the <code>configurations</code> list can have a targeting <code>JEXL</code> expression that you can use to target a specific group of users. They will be evaluated in the order they are defined until one matches.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="step-3---monitor-telemetry"></a>Step 3 - Monitor telemetry<a class="hash-link" href="#step-3---monitor-telemetry" title="Direct link to heading">#</a></h3><p>You can monitor users that receive your configuration by looking at the <a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/data/environment.html?highlight=experiments#experiments" target="_blank" rel="noopener noreferrer">experiments environment</a>. When a rollout is active, it will add the following:</p><ul><li><code>id</code>: <code>default-&lt;feature&gt;</code>, where <code>&lt;feature&gt;</code> is the id of your feature in the manifest</li><li><code>branch</code>: The slug of the whatever rollout configuration is active</li></ul><p>Remember that rollouts are not measurement tools. Rely on experimentation to measure effect sizes.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="custom-population-percentage"></a>Custom population percentage<a class="hash-link" href="#custom-population-percentage" title="Direct link to heading">#</a></h4><p>If you want to release a rollout to a specific portion of a population, you can add <a href="https://searchfox.org/mozilla-central/source/toolkit/components/utils/Sampling.jsm#120" target="_blank" rel="noopener noreferrer"><code>bucketSample</code></a> to the <code>targeting</code> string to do so. Here&#x27;s an example</p><p>Note that the three inputs are: the start of the range, the number of buckets, and the total buckets (which should always be <code>10000</code>).</p><p>In this example, this would enroll 20% of all users (from 0-2000).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;targeting&quot;: &quot;[userId, &quot;YOUR_NAMESPACE_HERE&quot;]|bucketSample(0, 2000, 10000)&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="testing-instructions"></a>Testing instructions<a class="hash-link" href="#testing-instructions" title="Direct link to heading">#</a></h2><p>In the future, we will support a preview workflow like with experiments. For now:</p><ol><li>Add the config to the staging Remote Settings <code>nimbus-desktop-defaults</code> collection.</li><li>Use the Remote Settings devtools to switch to the staging endpoint.</li></ol><p>For writing tests please see <a href="/desktop-frontend-testing#testing-with-desktop-rollouts">Testing with Desktop Rollouts</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/mozilla/experimenter-docs/edit/main/docs/desktop-rollouts.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/desktop-migration-guide"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Migration Guide (JS)</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/desktop-frontend-testing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Desktop Front-end testing »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#faqs" class="table-of-contents__link">FAQS</a><ul><li><a href="#what-is-this-for" class="table-of-contents__link">What is this for?</a></li><li><a href="#when-should-i-not-use-a-rollout" class="table-of-contents__link">When should I not use a rollout?</a></li><li><a href="#when-can-i-use-them" class="table-of-contents__link">When can I use them?</a></li><li><a href="#can-i-run-an-nimbus-experiment-and-a-rollout-simultaneously" class="table-of-contents__link">Can I run an Nimbus experiment and a rollout simultaneously?</a></li><li><a href="#what-if-a-user-enrolls-in-both-a-rollout-and-an-experiment" class="table-of-contents__link">What if a user enrolls in both a rollout and an experiment?</a></li></ul></li><li><a href="#how-to-launch-a-roll-out" class="table-of-contents__link">How to launch a roll-out</a><ul><li><a href="#step-1---register-your-feature-in-the-nimbus-manifest" class="table-of-contents__link">Step 1 - Register your feature in the Nimbus Manifest</a></li><li><a href="#step-2---add-a-configuration" class="table-of-contents__link">Step 2 - Add a configuration</a></li><li><a href="#step-3---monitor-telemetry" class="table-of-contents__link">Step 3 - Monitor telemetry</a></li></ul></li><li><a href="#testing-instructions" class="table-of-contents__link">Testing instructions</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Mozilla Corporation</div></div></div></footer></div>
<script src="/assets/js/runtime~main.010f4c78.js"></script>
<script src="/assets/js/main.c4a08676.js"></script>
</body>
</html>