<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Experimenter Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Experimenter Docs Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Experimenter Docs" href="/opensearch.xml"><title data-react-helmet="true">Troubleshooting Jetstream | Experimenter Docs</title><meta data-react-helmet="true" property="og:url" content="https://experimenter.info/jetstream/troubleshooting"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Troubleshooting Jetstream | Experimenter Docs"><meta data-react-helmet="true" name="description" content="How can I see what Jetstream is doing?"><meta data-react-helmet="true" property="og:description" content="How can I see what Jetstream is doing?"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://experimenter.info/jetstream/troubleshooting"><link data-react-helmet="true" rel="alternate" href="https://experimenter.info/jetstream/troubleshooting" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://experimenter.info/jetstream/troubleshooting" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.74449a08.css">
<link rel="preload" href="/assets/js/runtime~main.d48761fd.js" as="script">
<link rel="preload" href="/assets/js/main.d88d8d33.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo-dark.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Experimenter Docs</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://experimenter.services.mozilla.com/nimbus/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Nimbus</a><a href="https://mana.mozilla.org/wiki/display/FJT/Project+Nimbus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Mana</a><a href="https://github.com/mozilla/experimenter-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo-dark.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Experimenter Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://experimenter.services.mozilla.com/nimbus/" target="_blank" rel="noopener noreferrer" class="menu__link">Nimbus</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/Project+Nimbus" target="_blank" rel="noopener noreferrer" class="menu__link">Mana</a></li><li class="menu__list-item"><a href="https://github.com/mozilla/experimenter-docs" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Welcome</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/">Intro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contributing">Contributing</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/x/XdTNBw" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Design Process</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/Nimbus+Onboarding#NimbusOnboarding-Branches" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Nimbus Onboarding</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Experiment Owners</a><ul class="menu__list"><li class="menu__list-item"><a href="https://docs.google.com/document/d/155EUgzn22VTX8mFwesSROT3Z6JORSfb5VyoMoLra7ws" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Experimentation with Nimbus</a></li><li class="menu__list-item"><a href="https://docs.google.com/document/d/155EUgzn22VTX8mFwesSROT3Z6JORSfb5VyoMoLra7ws/edit#heading=h.75kfit458h84" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Monitoring and Analyzing your Experiment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/console/custom-audiences">Custom Audiences</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/console/preview">Previewing Experiments</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Jetstream</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jetstream/jetstream">Jetstream overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jetstream/metrics">Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jetstream/statistics">Statistics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jetstream/outcomes">Outcomes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jetstream/configuration">Configuring Jetstream</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jetstream/data-products">Jetstream Data Products</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jetstream/operations">Jetstream Architecture and Operations</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/jetstream/troubleshooting">Troubleshooting Jetstream</a></li><li class="menu__list-item"><a href="https://github.com/mozilla/jetstream" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="0">GitHub Repo</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Data Scientists</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/data-scientists">Root Page</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Fenix Engineers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fenix-engineers">Implementing an experiment</a></li><li class="menu__list-item"><a href="https://docs.google.com/document/d/1kchihPal0__A4VOAiPJarNuZXns5KhOHHfIeIzT6zfU/edit#" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Android API (proposal)</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Fenix Testing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/android-frontend-testing">Testing on mobile</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Desktop Engineers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/desktop-feature-api">Nimbus Feature API (JS)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/desktop-migration-guide">Migration Guide (JS)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/desktop-rollouts">Desktop Rollouts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/desktop-frontend-testing">Desktop Front-end testing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Core Nimbus Team</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/android-feature-api">PROPOSAL - Android Feature API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/client-sdk-states-and-lifecycle">Client SDK States &amp; Lifecycle</a></li><li class="menu__list-item"><a href="https://github.com/mozilla/experimenter" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Experimenter GH Repo</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/How+to+Launch+a+Nimbus+Experiment" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">How to Launch a Nimbus Experiment</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/pages/viewpage.action?pageId=130920248" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Nimbus Data Transfer Object</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/Nimbus+Engineering#NimbusEngineering-ExperimentTelemetry" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Experiment Telemetry</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/Lessons+Learned+-+Experiment+Incidents+and+Close+Calls" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Lessons Learned</a></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Troubleshooting Jetstream</h1></header><div class="markdown"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-can-i-see-what-jetstream-is-doing"></a>How can I see what Jetstream is doing?<a class="hash-link" href="#how-can-i-see-what-jetstream-is-doing" title="Direct link to heading">#</a></h3><p>For checking on daily Jetstream runs, the <code>jetstream</code> DAG can be viewed via the <a href="https://workflow.telemetry.mozilla.org/tree?dag_id=jetstream" target="_blank" rel="noopener noreferrer">Airflow Web UI</a>. This show whether the run is still in progress or has completed.</p><p>For checking on reruns after a config change, the <a href="https://app.circleci.com/pipelines/github/mozilla/jetstream-config?branch=main" target="_blank" rel="noopener noreferrer">jetstream-config CI</a> will show all active runs and indicate whether a rerun has been successful or if there have been any errors.</p><p>For viewing the Argo workflows Jetstream is running, connect to the Argo dashboard by running:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gcloud container clusters get-credentials jetstream --zone us-central1-a --project moz-fx-data-experiments &amp;&amp; kubectl port-forward --namespace argo $(kubectl get pod --namespace argo --selector=&#x27;app=argo-server&#x27; --output jsonpath=&#x27;{.items[0].metadata.name}&#x27;) 8080:2746</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The dashboard can than be accessed via <a href="http://127.0.0.1:8080" target="_blank" rel="noopener noreferrer">127.0.0.1:8080</a> through the web browser and provides a detailed overview of past workflows, the statuses of each step in a workflow and container logs.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-do-i-know-if-something-went-wrong"></a>How do I know if something went wrong?<a class="hash-link" href="#how-do-i-know-if-something-went-wrong" title="Direct link to heading">#</a></h3><p>Jetstream logs errors to the console and, optionally, to the <code>monitoring.logs</code> BigQuery table. Logging to BigQuery is enabled by default when running Jetstream via Airflow, as it allows for better alerting and monitoring of errors. It is by default disabled for runs triggered via the jetstream-config CI.</p><p>Errors can be viewed on the <a href="https://sql.telemetry.mozilla.org/dashboard/jetstream-errors?p_experiment=%25" target="_blank" rel="noopener noreferrer">Jetstream error dashboard</a> in Redash.</p><p>Additionally, alerts have been set up in Redash to check for errors daily and sent an email if failures have been detected. To subscribe to these alerts, email addresses can be added as <em>Destinations</em> in the <a href="https://sql.telemetry.mozilla.org/alerts/81" target="_blank" rel="noopener noreferrer">Redash alert configuration</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="something-went-wrong-what-do-i-do"></a>Something went wrong, what do I do?<a class="hash-link" href="#something-went-wrong-what-do-i-do" title="Direct link to heading">#</a></h3><ol><li>Check the <a href="https://sql.telemetry.mozilla.org/dashboard/jetstream-errors?p_experiment=%25" target="_blank" rel="noopener noreferrer">Jetstream error dashboard</a> for more details on the error that occurred.</li><li>If the experiment uses a custom configuration, make sure the configuration is valid. Sometimes, SQL written for specifying metrics in the configuration file can contain logical errors that result in failures when computing statistics.<ul><li>It is possible that SQL that was once valid starts to fail, because the query has become too complex. This can happen if new fields get added to a table that is being queried. In these cases, try to rewrite and simplify the SQL query or consider using source tables instead of derived views. </li></ul></li></ol><p>If you are unsure of what might have gone wrong or what to, you can open <a href="https://jira.mozilla.com/projects/CIRRUS/issues/CIRRUS-68?filter=allopenissues" target="_blank" rel="noopener noreferrer">an issue in Jira</a> or ask for help in the <a href="https://mozilla.slack.com/archives/CF94YGE03" target="_blank" rel="noopener noreferrer">#ask-experimenter</a> Slack channel.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="some-results-appear-to-be-missing"></a>Some results appear to be missing<a class="hash-link" href="#some-results-appear-to-be-missing" title="Direct link to heading">#</a></h3><p>It can take up to 2 days for results of the overall time period to be available after an experiment ends. For example, if an experiment ends on 2021-04-05, then results for the overall time period will be computed in the next daily analysis run on 2021-04-06. As running the analysis can take a few hours to complete results will be available on 2021-04-07.</p><p>If results other than for the overall period are missing or more than 2 days have passed and no overall results are available, check the <a href="https://sql.telemetry.mozilla.org/dashboard/jetstream-errors?p_experiment=%25" target="_blank" rel="noopener noreferrer">Jetstream error dashboard</a> if there are any analysis errors for your experiment.</p><p>If there have been no errors, or the errors cannot be resolved, open <a href="https://jira.mozilla.com/projects/CIRRUS/issues/CIRRUS-68?filter=allopenissues" target="_blank" rel="noopener noreferrer">an issue in Jira</a> or ask for help in the <a href="https://mozilla.slack.com/archives/CF94YGE03" target="_blank" rel="noopener noreferrer">#ask-experimenter</a> Slack channel.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-do-i-debug-operational-or-more-complex-errors"></a>How do I debug operational or more complex errors?<a class="hash-link" href="#how-do-i-debug-operational-or-more-complex-errors" title="Direct link to heading">#</a></h3><p>Debugging operational or more complex errors is usually done by Jetstream engineers.</p><ol><li>Check the <a href="https://sql.telemetry.mozilla.org/dashboard/jetstream-errors?p_experiment=%25" target="_blank" rel="noopener noreferrer">Jetstream error dashboard</a> for more details on the error that occurred.</li><li>To get more detailed logs or view each individual workflow step, connect to the Argo dashboard and navigate to the workflow where errors might have occurred.</li><li>Once errors have been resolved, to rerun affected experiments for the date when they failed make sure to install the Jetstream CLI locally and execute: <code>jetstream run-argo --date=2021-04-26 --experiment_slug=bug-1695015-pref-new-tab-modernized-ux-region-1-release-86-88</code>. For example: <code>jetstream run-argo --date=2021-04-26 --experiment_slug=bug-1695015-pref-new-tab-modernized-ux-region-1-release-86-88</code></li></ol><p>The logs can indicate a couple of different problems:</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="there-has-been-a-operational-error-related-to-kubernetes"></a>There has been a operational error related to Kubernetes<a class="hash-link" href="#there-has-been-a-operational-error-related-to-kubernetes" title="Direct link to heading">#</a></h4><p>This could happen, for example, if available memory or CPUs have been exceeded. To get more information about the pods that failed, navigate to the <a href="https://console.cloud.google.com/kubernetes/workload?project=moz-fx-data-experiments&amp;pageState=(%22savedViews%22:(%22i%22:%22bf4f1f5805924fe2ba1cd23bd3b0ef8b%22,%22c%22:%5B%22gke%2Fus-central1-a%2Fjetstream%22%5D,%22n%22:%5B%5D))" target="_blank" rel="noopener noreferrer"><code>jetstream</code> Kubernetes cluster in the GCP web console</a>. The web UI allows to view the memory and CPU usage of specific pods or the entire cluster as well as pod logs. This information can help to decide whether the cluster needs to be resized. Resizing the cluster or allocating more resources is worth considering if these errors happen frequently. For occasional failures, simply rerunning the affected experiment is sufficient.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="an-external-config-or-outcome-definition-is-causing-failures"></a>An external config or outcome definition is causing failures<a class="hash-link" href="#an-external-config-or-outcome-definition-is-causing-failures" title="Direct link to heading">#</a></h4><ol><li>Ensure that the config is valid and that SQL does not contain any logical errors.</li><li>If the SQL has become too complex, try to simplify queries or use source tables instead of derived views.</li><li>Fix the configuration. Once the new config gets merge, the experiment will be rerun automatically.
</li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="there-has-been-an-error-because-of-a-timeout-when-using-an-external-api"></a>There has been an error because of a timeout when using an external API.<a class="hash-link" href="#there-has-been-an-error-because-of-a-timeout-when-using-an-external-api" title="Direct link to heading">#</a></h4><p>Timeouts occasionally happen when running queries in BigQuery, fetching experiments from the Experimenter API or fetching config files from GitHub. Jetstream implements a retry mechanism for most of these cases but it is possible that all of these retries fail. Rerunning affected experiments should in most cases resolve these issues. However, if this failures keep happening then this could indicate API changes.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="there-is-a-bug-in-the-jetstream-code-base"></a>There is a bug in the jetstream code base<a class="hash-link" href="#there-is-a-bug-in-the-jetstream-code-base" title="Direct link to heading">#</a></h4><ol><li>Add a test case to <a href="https://github.com/mozilla/jetstream" target="_blank" rel="noopener noreferrer">jetstream</a> to reproduce the error.</li><li>Fix the bug and open a PR against the repository.</li><li>Once the fix has been approved, merged and deployed, the affected experiment can be rerun.</li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="airflow-returned-an-error-or-is-sending-notification-emails"></a>Airflow returned an error or is sending notification emails<a class="hash-link" href="#airflow-returned-an-error-or-is-sending-notification-emails" title="Direct link to heading">#</a></h4><ol><li>Check the Airflow logs</li><li>Errors in Airflow can happen if there has been a problem with the Airflow cluster itself, e.g. the jetstream tasks could not be started. In this case, clearing the affected task to trigger a rerun should fix the issue. If problems persist, then reach out to data ops by <a href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Data%20Platform%20and%20Tools" target="_blank" rel="noopener noreferrer">opening a Bugzilla ticket</a>.</li><li>Airflow failures can also occur if the analysis workflow could not be started. For example, if connecting to the Argo cluster failed. Check if the <code>jetstream</code> cluster is in a healthy state and if the analysis run can be started using a locally installed Jetstream CLI.</li><li>The Jetstream DAG has some upstream dependencies that need to successfully complete in order for jetstream to run. If one of these upstream dependencies fails, then Airflow will keep sending email alerts with <code>up_for_retry</code> in the subject. Failures in the upstream dependencies need to be resolved before jetstream can run. Check for the owner of the upstream task that failed and open a <a href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Data%20Platform%20and%20Tools" target="_blank" rel="noopener noreferrer">Bugzilla ticket</a> with the owner tagged.</li></ol></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/mozilla/experimenter-docs/edit/main/docs/jetstream/troubleshooting.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/jetstream/operations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Jetstream Architecture and Operations</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/data-scientists"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Root Page »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-can-i-see-what-jetstream-is-doing" class="table-of-contents__link">How can I see what Jetstream is doing?</a></li><li><a href="#how-do-i-know-if-something-went-wrong" class="table-of-contents__link">How do I know if something went wrong?</a></li><li><a href="#something-went-wrong-what-do-i-do" class="table-of-contents__link">Something went wrong, what do I do?</a></li><li><a href="#some-results-appear-to-be-missing" class="table-of-contents__link">Some results appear to be missing</a></li><li><a href="#how-do-i-debug-operational-or-more-complex-errors" class="table-of-contents__link">How do I debug operational or more complex errors?</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Mozilla Corporation</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d48761fd.js"></script>
<script src="/assets/js/main.d88d8d33.js"></script>
</body>
</html>