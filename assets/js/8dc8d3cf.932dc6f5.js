(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{83:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return a})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return u}));var r=n(3),o=n(7),i=(n(0),n(99)),a={id:"desktop-rollouts",title:"Desktop Rollouts",slug:"/desktop-rollouts"},s={unversionedId:"desktop-rollouts",id:"desktop-rollouts",isDocsHomePage:!1,title:"Desktop Rollouts",description:'If you want to set configurations for a feature remotely outside of an experiment, you can do so with Nimbus "Remote Defaults".',source:"@site/docs/desktop-rollouts.md",slug:"/desktop-rollouts",permalink:"/experimenter-docs/desktop-rollouts",editUrl:"https://github.com/mozilla/experimenter-docs/edit/main/docs/desktop-rollouts.md",version:"current",sidebar:"sidebar",previous:{title:"Migration Guide (JS)",permalink:"/experimenter-docs/desktop-migration-guide"},next:{title:"Desktop Front-end testing",permalink:"/experimenter-docs/desktop-frontend-testing"}},l=[{value:"Caveats &amp; Prerequisites",id:"caveats--prerequisites",children:[]},{value:"Step 1 - Register your feature in Firefox",id:"step-1---register-your-feature-in-firefox",children:[]},{value:"Step 2 - Add a configuration to Remote Settings",id:"step-2---add-a-configuration-to-remote-settings",children:[{value:"Configurations",id:"configurations",children:[]}]},{value:"FAQ",id:"faq",children:[{value:"How do rollouts interact with experiments?",id:"how-do-rollouts-interact-with-experiments",children:[]},{value:"How do I test a remote default?",id:"how-do-i-test-a-remote-default",children:[]}]}],c={toc:l};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"If you want to set configurations for a feature remotely ",Object(i.b)("em",{parentName:"p"},"outside of an experiment"),', you can do so with Nimbus "Remote Defaults".'),Object(i.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"This feature is still in the early stages of development. The first version will be available in Firefox 89."))),Object(i.b)("h2",{id:"caveats--prerequisites"},"Caveats & Prerequisites"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Because this feature is in the early stages of testing, it is only available to Experiment Reviewers and the UJET team"),Object(i.b)("li",{parentName:"ul"},"This feature is currently Desktop-only"),Object(i.b)("li",{parentName:"ul"},"You must have access to the ",Object(i.b)("inlineCode",{parentName:"li"},"nimbus-desktop-defaults")," remote settings collection to test/deploy changes")),Object(i.b)("h2",{id:"step-1---register-your-feature-in-firefox"},"Step 1 - Register your feature in Firefox"),Object(i.b)("p",null,"To be able to use remote defaults, make sure you register your feature in ",Object(i.b)("inlineCode",{parentName:"p"},"ExperimentAPI.jsm")," and add variables you want to be able to set remotely. This process is identical to what you would do for running Nimbus Experiments, so if you've already done that, you don't need to make any changes in Firefox."),Object(i.b)("p",null,"See the documentation for the ",Object(i.b)("a",{parentName:"p",href:"desktop-feature-api"},"Nimbus Feature API")," for more details."),Object(i.b)("h2",{id:"step-2---add-a-configuration-to-remote-settings"},"Step 2 - Add a configuration to Remote Settings"),Object(i.b)("p",null,"To rollout changes to a feature, you will need to update (or create, if none exists) the record that matches your feature id in the ",Object(i.b)("inlineCode",{parentName:"p"},"nimbus-desktop-defaults")," remote settings collection:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-js"},'{\n  // The feature id - should match your manifest entry\n  id: "aboutwelcome",\n\n  configurations: [\n    {\n      description: "For windows users that can use the pin API",\n      targeting: "os.windowsBuildId > 12345",\n      enabled: true,\n      variables: { skipFocus: false },\n\n    },\n    {\n      description: "All users",\n      targeting: "true",\n      enabled: true,\n      variables: { skipFocus: true },\n    },\n  ],\n}\n')),Object(i.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"Warning: The format of this JSON is not yet finalized. In the future, this will be managed by UI."))),Object(i.b)("h3",{id:"configurations"},"Configurations"),Object(i.b)("p",null,"Each entry in the ",Object(i.b)("inlineCode",{parentName:"p"},"configurations")," list can have a targeting ",Object(i.b)("inlineCode",{parentName:"p"},"JEXL")," expression that you can use to target a specific group of users. They will be evaluated in the order they are defined until one matches."),Object(i.b)("h2",{id:"faq"},"FAQ"),Object(i.b)("h3",{id:"how-do-rollouts-interact-with-experiments"},"How do rollouts interact with experiments?"),Object(i.b)("p",null,"If a client receives a remote default ",Object(i.b)("em",{parentName:"p"},"and")," enrolls in an experiment, the Feature API will ",Object(i.b)("strong",{parentName:"p"},"prefer the experiment configuration"),"."),Object(i.b)("h3",{id:"how-do-i-test-a-remote-default"},"How do I test a remote default?"),Object(i.b)("p",null,"In the future, we will support a preview workflow like with experiments. For now:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Add the config to the staging Remote Settings ",Object(i.b)("inlineCode",{parentName:"li"},"nimbus-desktop-defaults")," collection."),Object(i.b)("li",{parentName:"ol"},"Use the Remote Settings devtools to switch to the staging endpoint.")))}u.isMDXComponent=!0},99:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var r=n(0),o=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=o.a.createContext({}),u=function(e){var t=o.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=u(e.components);return o.a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,a=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(n),b=r,m=d["".concat(a,".").concat(b)]||d[b]||p[b]||i;return n?o.a.createElement(m,s(s({ref:t},c),{},{components:n})):o.a.createElement(m,s({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=b;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,a[1]=s;for(var c=2;c<i;c++)a[c]=n[c];return o.a.createElement.apply(null,a)}return o.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);